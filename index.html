<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>9M2PJU Morse Code Trainer</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center min-h-screen p-6">
  <h1 class="text-4xl font-bold mb-6 text-blue-400">9M2PJU Morse Code Trainer</h1>

  <!-- Tabs -->
  <div class="flex space-x-4 mb-6">
    <button id="tabEncode" class="tab-btn bg-blue-500 px-4 py-2 rounded-lg">Text â†’ Morse</button>
    <button id="tabPractice" class="tab-btn bg-gray-700 px-4 py-2 rounded-lg">Listen & Type</button>
    <button id="showAlphabet" class="bg-yellow-500 hover:bg-yellow-600 px-4 py-2 rounded-lg">Morse Alphabet</button>
  </div>

  <!-- ENCODE MODE -->
  <div id="encodeMode" class="w-full max-w-xl bg-gray-800 p-6 rounded-2xl shadow-lg">
    <h2 class="text-xl font-semibold mb-4">Convert Text to Morse & Play</h2>
    <textarea id="textInput" placeholder="Enter text..." class="w-full p-3 rounded-lg bg-gray-700 text-white mb-4"></textarea>

    <!-- Sliders -->
    <div class="mb-4">
      <label for="freqSlider" class="block text-sm mb-1">Tone Frequency: <span id="freqValue">600</span> Hz</label>
      <input id="freqSlider" type="range" min="300" max="1000" value="600" class="w-full">
    </div>
    <div class="mb-4">
      <label for="wpmSlider" class="block text-sm mb-1">Speed: <span id="wpmValue">20</span> WPM</label>
      <input id="wpmSlider" type="range" min="5" max="40" value="20" class="w-full">
    </div>
    <p class="mt-2 text-gray-400 text-sm">Adjust tone and speed to suit your preference.</p>

    <div class="flex space-x-4 mt-4">
      <button id="playBtn" class="bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg">Play Morse</button>
      <button id="clearBtn" class="bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg">Clear</button>
    </div>
  </div>

  <!-- PRACTICE MODE -->
  <div id="practiceMode" class="hidden w-full max-w-xl bg-gray-800 p-6 rounded-2xl shadow-lg">
    <h2 class="text-xl font-semibold mb-4">Listen & Type Practice</h2>
    <div class="flex space-x-4 mb-4">
      <button id="startPractice" class="bg-purple-500 hover:bg-purple-600 px-4 py-2 rounded-lg">Start Practice</button>
    </div>
    <input id="practiceInput" type="text" placeholder="Type what you hear..." class="w-full p-3 rounded-lg bg-gray-700 text-white mb-4" disabled>
    <p id="practiceResult" class="text-lg font-semibold text-blue-400"></p>
  </div>

  <!-- MODAL -->
  <div id="alphabetModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
    <div class="bg-gray-800 p-6 rounded-xl w-11/12 max-w-2xl">
      <h3 class="text-2xl font-bold mb-4 text-yellow-400">Morse Code Alphabet</h3>
      <div class="grid grid-cols-4 gap-4 text-center">
        <div>A<br><span class="text-green-400">.-</span></div>
        <div>B<br><span class="text-green-400">-...</span></div>
        <div>C<br><span class="text-green-400">-.-.</span></div>
        <div>D<br><span class="text-green-400">-..</span></div>
        <div>E<br><span class="text-green-400">.</span></div>
        <div>F<br><span class="text-green-400">..-.</span></div>
        <div>G<br><span class="text-green-400">--.</span></div>
        <div>H<br><span class="text-green-400">....</span></div>
        <div>I<br><span class="text-green-400">..</span></div>
        <div>J<br><span class="text-green-400">.---</span></div>
        <div>K<br><span class="text-green-400">-.-</span></div>
        <div>L<br><span class="text-green-400">.-..</span></div>
        <div>M<br><span class="text-green-400">--</span></div>
        <div>N<br><span class="text-green-400">-.</span></div>
        <div>O<br><span class="text-green-400">---</span></div>
        <div>P<br><span class="text-green-400">.--.</span></div>
        <div>Q<br><span class="text-green-400">--.-</span></div>
        <div>R<br><span class="text-green-400">.-.</span></div>
        <div>S<br><span class="text-green-400">...</span></div>
        <div>T<br><span class="text-green-400">-</span></div>
        <div>U<br><span class="text-green-400">..-</span></div>
        <div>V<br><span class="text-green-400">...-</span></div>
        <div>W<br><span class="text-green-400">.--</span></div>
        <div>X<br><span class="text-green-400">-..-</span></div>
        <div>Y<br><span class="text-green-400">-.--</span></div>
        <div>Z<br><span class="text-green-400">--..</span></div>
        <div>0<br><span class="text-green-400">-----</span></div>
        <div>1<br><span class="text-green-400">.----</span></div>
        <div>2<br><span class="text-green-400">..---</span></div>
        <div>3<br><span class="text-green-400">...--</span></div>
        <div>4<br><span class="text-green-400">....-</span></div>
        <div>5<br><span class="text-green-400">.....</span></div>
        <div>6<br><span class="text-green-400">-....</span></div>
        <div>7<br><span class="text-green-400">--...</span></div>
        <div>8<br><span class="text-green-400">---..</span></div>
        <div>9<br><span class="text-green-400">----.</span></div>
      </div>
      <div class="text-center mt-6">
        <button id="closeModal" class="bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg">Close</button>
      </div>
    </div>
  </div>

  <script>
    // Morse Map
    const morseMap = {
      'A': '.-', 'B': '-...', 'C': '-.-.', 'D': '-..', 'E': '.',
      'F': '..-.', 'G': '--.', 'H': '....', 'I': '..', 'J': '.---',
      'K': '-.-', 'L': '.-..', 'M': '--', 'N': '-.', 'O': '---',
      'P': '.--.', 'Q': '--.-', 'R': '.-.', 'S': '...', 'T': '-',
      'U': '..-', 'V': '...-', 'W': '.--', 'X': '-..-', 'Y': '-.--',
      'Z': '--..', '0': '-----', '1': '.----', '2': '..---', '3': '...--',
      '4': '....-', '5': '.....', '6': '-....', '7': '--...', '8': '---..',
      '9': '----.', ' ': '/'
    };

    // Audio setup
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    const audioCtx = new AudioContext();

    let toneFreq = 600;
    let wpm = 20;

    const freqSlider = document.getElementById('freqSlider');
    const wpmSlider = document.getElementById('wpmSlider');
    const freqValue = document.getElementById('freqValue');
    const wpmValue = document.getElementById('wpmValue');

    freqSlider.addEventListener('input', () => {
      toneFreq = parseInt(freqSlider.value);
      freqValue.textContent = toneFreq;
    });

    wpmSlider.addEventListener('input', () => {
      wpm = parseInt(wpmSlider.value);
      wpmValue.textContent = wpm;
    });

    function playTone(duration) {
      const oscillator = audioCtx.createOscillator();
      const gainNode = audioCtx.createGain();
      oscillator.connect(gainNode);
      gainNode.connect(audioCtx.destination);
      oscillator.type = 'sine';
      oscillator.frequency.value = toneFreq;
      oscillator.start();
      oscillator.stop(audioCtx.currentTime + duration);
    }

    async function playMorse(text) {
      const unit = 1.2 / wpm; // time for one dot in seconds
      for (const char of text.toUpperCase()) {
        if (morseMap[char]) {
          for (const symbol of morseMap[char]) {
            if (symbol === '.') {
              playTone(unit);
              await new Promise(r => setTimeout(r, unit * 1000 * 2));
            } else if (symbol === '-') {
              playTone(unit * 3);
              await new Promise(r => setTimeout(r, unit * 1000 * 4));
            }
          }
          await new Promise(r => setTimeout(r, unit * 1000 * 4));
        }
      }
    }

    // UI logic
    const encodeMode = document.getElementById('encodeMode');
    const practiceMode = document.getElementById('practiceMode');
    const tabEncode = document.getElementById('tabEncode');
    const tabPractice = document.getElementById('tabPractice');
    const playBtn = document.getElementById('playBtn');
    const clearBtn = document.getElementById('clearBtn');
    const textInput = document.getElementById('textInput');
    const startPractice = document.getElementById('startPractice');
    const practiceInput = document.getElementById('practiceInput');
    const practiceResult = document.getElementById('practiceResult');
    const showAlphabet = document.getElementById('showAlphabet');
    const alphabetModal = document.getElementById('alphabetModal');
    const closeModal = document.getElementById('closeModal');

    // Tab switching
    tabEncode.addEventListener('click', () => {
      encodeMode.classList.remove('hidden');
      practiceMode.classList.add('hidden');
      tabEncode.classList.add('bg-blue-500');
      tabPractice.classList.remove('bg-blue-500');
      tabPractice.classList.add('bg-gray-700');
    });

    tabPractice.addEventListener('click', () => {
      encodeMode.classList.add('hidden');
      practiceMode.classList.remove('hidden');
      tabPractice.classList.add('bg-blue-500');
      tabEncode.classList.remove('bg-blue-500');
      tabEncode.classList.add('bg-gray-700');
    });

    playBtn.addEventListener('click', () => {
      const text = textInput.value.trim();
      if (text) playMorse(text);
    });

    clearBtn.addEventListener('click', () => {
      textInput.value = '';
    });

    const words = [
  'CQ', 'TEST', 'HAM', 'RADIO', 'MORSE', 'HELLO', 'WORLD',
  'AMATEUR', 'COMMUNICATION', 'ANTENNA', 'TRANSCEIVER', 'REPEATER',
  'DX', 'CONTEST', 'OPERATOR', 'QSO', '73', 'RIG', 'CW', 'SSB',
  'FREQUENCY', 'BAND', 'UHF', 'VHF', 'HF', 'SATELLITE', 'APRS',
  'EMERGENCY', 'NET', 'CALLSIGN', 'QTH', 'QRT', 'QSY', 'QRP',
  'RECEIVER', 'TRANSMITTER', 'MODULATION', 'DIGITAL', 'ANALOG',
  'SIGNAL', 'NOISE', 'PROPAGATION', 'IONOSPHERE', 'SUNSPOT',
  'BATTERY', 'POWER', 'GROUND', 'COAX', 'CONNECTOR', 'SWR',
  'LOGBOOK', 'LICENSE', 'ELMER', 'ARRL', 'ITU', 'FCC', 'IARU',
  'MILITARY', 'TACTICAL', 'COMMAND', 'CONTROL', 'ENCRYPTION',
  'DECRYPT', 'SECURE', 'SATELLITE', 'SURVEILLANCE', 'INTERCEPT',
  'CODING', 'DECODING', 'SPECTRUM', 'JAMMING', 'RADAR', 'SONAR',
  'COMMSEC', 'COMMS', 'CHANNEL', 'VOX', 'PTT', 'KEY', 'MICROPHONE',
  'SPEAKER', 'HEADSET', 'HANDHELD', 'MOBILE', 'BASE', 'FIELD',
  'DEPLOY', 'EXERCISE', 'TRAINING', 'RESCUE', 'DISASTER', 'WEATHER',
  'GEOCACHING', 'FOXHUNT', 'SSTV', 'RTTY', 'FT8', 'PSK31', 'WINLINK',
  'ECHOLINK', 'IRLP', 'DSTAR', 'FUSION', 'P25', 'TETRA', 'TRUNKING',
  'RECONNAISSANCE', 'INTELLIGENCE', 'CYPHER', 'ROGER', 'OVER', 'OUT',
  'BREAK', 'STANDBY', 'AFFIRMATIVE', 'NEGATIVE', 'WILCO', 'ROGER THAT',

  // Q Codes (common in amateur radio)
  'QRA', 'QRB', 'QRG', 'QRH', 'QRI', 'QRJ', 'QRK', 'QRL', 'QRM', 'QRN',
  'QRO', 'QRP', 'QRQ', 'QRS', 'QRT', 'QRU', 'QRV', 'QRW', 'QRX', 'QRY',
  'QRZ', 'QSA', 'QSB', 'QSD', 'QSG', 'QSK', 'QSL', 'QSM', 'QSN', 'QSO',
  'QSP', 'QST', 'QSU', 'QSW', 'QSX', 'QSY', 'QSZ', 'QTA', 'QTC', 'QTH',
  'QTR', 'QUA',

  // NATO Z Codes (military communications) - a selection of common ones
  'ZAA', 'ZAB', 'ZAC', 'ZAD', 'ZAE', 'ZAF', 'ZAG', 'ZAH', 'ZAI', 'ZAJ',
  'ZAK', 'ZAL', 'ZAM', 'ZAN', 'ZAO', 'ZAP', 'ZAQ', 'ZAR', 'ZAS', 'ZAT',
  'ZAU', 'ZAV', 'ZAW', 'ZAX', 'ZAY', 'ZAZ',

  // Common Military Radio Proverbs, Words, and Phrases
  'COPY', 'LOUD AND CLEAR', 'READ YOU', 'SAY AGAIN', 'AFFIRMATIVE', 'NEGATIVE',
  'OVER AND OUT', 'ROGER WILCO', 'BREAK BREAK', 'ALL STATIONS', 'THIS IS',
  'FOR YOUR INFORMATION', 'DO YOU COPY', 'GO AHEAD', 'OUT CONTACT',
  'MISSION', 'INTEL', 'GRID', 'SITREP', 'HOSTILE', 'FRIENDLY',
  'CONTACT', 'ENGAGE', 'DISENGAGE', 'SECURE', 'CLEARED', 'ETA', 'ETD',
  'ALPHA', 'BRAVO', 'CHARLIE', 'DELTA', 'ECHO', 'FOXTROT', 'GOLF',
  'HOTEL', 'INDIA', 'JULIETT', 'KILO', 'LIMA', 'MIKE', 'NOVEMBER',
  'OSCAR', 'PAPA', 'QUEBEC', 'ROMEO', 'SIERRA', 'TANGO', 'UNIFORM',
  'VICTOR', 'WHISKEY', 'XRAY', 'YANKEE', 'ZULU', // Phonetic Alphabet
  'STAND BY', 'WAIT ONE', 'CHECK', 'RADIO CHECK', 'HOW COPY', 'FIVE BY FIVE',
  'RADIO SILENCE', 'OPSEC', 'COMSEC', 'SITREP', 'LOX', // Liquid Oxygen, common in some comms contexts
  'CLANDESTINE', 'INTERDICTION', 'TACTICAL DATA LINK', 'JTIDS', 'LINK 16',
  'CHOKEPOINT', 'EMCON', 'ELECTRONIC WARFARE', 'EW', 'ISR', // Intelligence, Surveillance, Reconnaissance
  'C2', // Command and Control
  'SOP', // Standard Operating Procedure
  'JOC', // Joint Operations Center
  'AOR', // Area Of Responsibility
  'ROE', // Rules Of Engagement
  'MICS', // Military Information Classification System
  'BLACKOUT', 'WHITE NOISE', 'BURST TRANSMISSION', 'ECCM', // Electronic Counter-Countermeasures
  'ECM', // Electronic Countermeasures
  'PROWORD', 'MNEMONIC', 'PHRASEOLOGY', 'CALLSIGN', 'NET CONTROL',
  'AUTHENTICATION', 'CHALLENGE', 'RESPONSE', 'CIPHER', 'DECRYPT',
  'TRAFFIC', 'MESSAGE', 'PREAMBLE', 'TEXT', 'POSTAMBLE', 'FLASH',
  'IMMEDIATE', 'PRIORITY', 'ROUTINE', 'DEFERRED', // Message Precedence
  'CODE WORD', 'PASSCODE', 'DEAD DROP', 'ONE TIME PAD',
  'COVERT', 'OVERT', 'RENDEZVOUS', 'SCRAMBLE', 'UNSCRAMBLE'
];
    let currentWord = '';

    startPractice.addEventListener('click', async () => {
      currentWord = words[Math.floor(Math.random() * words.length)];
      practiceInput.value = '';
      practiceInput.disabled = false;
      practiceInput.focus();
      practiceResult.textContent = '';
      await playMorse(currentWord);
    });

    practiceInput.addEventListener('input', () => {
      if (practiceInput.value.toUpperCase() === currentWord) {
        practiceResult.textContent = 'âœ… Correct!';
        practiceResult.classList.add('text-green-400');
      }
    });

    showAlphabet.addEventListener('click', () => {
      alphabetModal.classList.remove('hidden');
    });

    closeModal.addEventListener('click', () => {
      alphabetModal.classList.add('hidden');
    });

    alphabetModal.addEventListener('click', (e) => {
      if (e.target === alphabetModal) alphabetModal.classList.add('hidden');
    });
  </script>
</body>
</html>
